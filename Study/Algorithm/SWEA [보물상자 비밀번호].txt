//SWEA [보물상자 비밀번호]

#include<iostream>
#include<algorithm>
#include<string>
#include<vector>
using namespace std;
int N, K;
string S;
vector<char> str;
vector<string> arr, sol_arr;
void rotate(){
    string temp_str="";
    for(int i=0; i<4; i++){
        for(int k=0; k < N/4 ;k++){
            temp_str += str[(N/4)*i+k];
        }
        arr.push_back(temp_str);
        temp_str="";
    }
    char ch=str[0];
    str.erase(str.begin());
    str.push_back(ch);
    
}
int main(){
    int T;
    cin >> T;
    for(int t= 1 ; t<= T; t++){
        cin >> N >>K;
        cin >> S;
        for(int s=0; s<S.length(); s++){
            str.push_back(S[s]);
        }
        for(int r=0; r<N/4; r++){
            rotate();
        }
        //sort
        sort(arr.begin(), arr.end(),greater<string>());
        //중복 제거
        
        sol_arr.push_back(arr[0]);
        for(int a=1; a<arr.size(); a++){
            if(arr[a-1].compare(arr[a])!=0){
                sol_arr.push_back(arr[a]);
            }
        }
        
        char *temp_ch = new char[N/4 +2];
        temp_ch[0] ='0';
        temp_ch[1] ='x';
        for(int i=0; i<sol_arr[K-1].length(); i++){
            temp_ch[i+2] = sol_arr[K-1][i];
        }
        long long sol_num=(long long)strtol(temp_ch, NULL, 0);
        cout <<"#"<<t <<" "<<sol_num<<"\n";
        
        arr.clear();
        sol_arr.clear();
        str.clear();
    }
    return 0;
}