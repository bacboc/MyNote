//백준14499 [주사위 굴리기]
// 시뮬레이션
#include<iostream>
#include<vector>
using namespace std;
int N,M,Y, X, Command;
int Map[21][21];
int dx[]={1,-1,0,0};
int dy[]={0,0,-1,1};
int Ju[6] = {0,};
void simul(int d){
    if(0<=X+dx[d]&&X+dx[d]<M&&0<=Y+dy[d]&&Y+dy[d]<N){
        X= X +dx[d];
        Y= Y +dy[d];
        if(d==0){//동
            int temp =Ju[0]; //이동한 후 주사위 상태 Update
            Ju[0] = Ju[2];
            Ju[2] = Ju[5];
            Ju[5] = Ju[1];
            Ju[1] = temp;
        }else if(d==1){//서
            int temp =Ju[0];
            Ju[0] = Ju[1];
            Ju[1] = Ju[5];
            Ju[5] = Ju[2];
            Ju[2] = temp;
        }else if(d==2){//북
            int temp =Ju[0];
            Ju[0] = Ju[3];
            Ju[3] = Ju[5];
            Ju[5] = Ju[4];
            Ju[4] = temp;
        }else if(d==3){//남
            int temp =Ju[0];
            Ju[0] = Ju[4];
            Ju[4] = Ju[5];
            Ju[5] = Ju[3];
            Ju[3] = temp;
        }
        
        if(Map[Y][X] != 0){ // 주사위 전환
            Ju[0] = Map[Y][X];
            Map[Y][X] = 0;
        }else{
            Map[Y][X] = Ju[0];
        }
        cout << Ju[5] << "\n";
    }
    
}

int main(){
    cin >> N >>M >>Y >>X>>Command;
    for(int r=0; r<N; r++){
        for(int c=0; c<M; c++){
            cin >> Map[r][c];
        }
    }
    int de;
    for(int i=0; i<Command; i++){
        cin>> de;
        simul(de-1);
    }
    return 0;
}